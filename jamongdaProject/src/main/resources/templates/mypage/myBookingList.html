<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="/layout/layout">
<head>
<meta charset="UTF-8">
<title>마이페이지</title>
<link rel="stylesheet" th:href="@{/css/myBookingList.css}" />
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script type="text/javascript" th:src="@{/js/common.js}"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<style>
	html,
	body {
	  position: relative;
	  min-width: 1250px;
	  max-width: 1920px;
	  margin: 0 auto;
	}

	body {
	  background: rgb(252, 252, 252);
	  font-family: Helvetica Neue, Helvetica, Arial, sans-serif;
	  font-size: 14px;
	  color: #000;
	  margin: 0 auto;
	  padding: 0 auto;
	  /*background-color: #f4f4f4;*/
	}

    .mypage-container {
        width: 600px;
        margin: 50px auto;
        padding: 20px;
        background-color: #fff;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    .header {
        text-align: left;
        margin-bottom: 20px;
    }

    .header h1 {
        margin: 0;
        font-size: 24px;
        color: #333;
    }

    .header p {
        margin: 5px 0 20px;
        color: #777;
    }

    .reviews {
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 5px;
        background-color: #fafafa;
        margin-bottom: 20px;
    }

    .booking-history h2 {
        margin-bottom: 20px;
    }

    .booking-card {
        border: 1px solid #ddd;
        border-radius: 5px;
        background-color: #fafafa;
        padding: 20px;
        margin-bottom: 20px;
    }

    .booking-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 1px solid #ddd;
        padding-bottom: 10px;
        margin-bottom: 10px;
    }

    .booking-header .booking-date,
    .booking-header .booking-number {
        font-size: 14px;
        color: #777;
    }

    .details-link {
        color: #1a73e8;
        text-decoration: none;
        font-size: 14px;
    }

    .booking-content {
        display: flex;
        align-items: center;
    }

    .acc-image {
        border-radius: 5px;
        margin-right: 20px;
    }

    .hotel-info {
        font-size: 14px;
    }

    .hotel-info .acc-name {
        font-weight: bold;
        font-size: 16px;
        margin-bottom: 5px;
    }

    .hotel-info .ro_name,
    .hotel-info .booking-dates,
    .hotel-info .check-in-out {
        margin-bottom: 5px;
    }
</style>
<script>
	function openPopup(boNumber) {
	    var url = '/mypage/myBookingDetails.do?number=' + encodeURIComponent(boNumber);
		
		// 팝업창 위치 조정하기
		var popupW = 600;
		var popupH = 700;
		var top = Math.ceil((window.screen.height - popupH)/2);
		var left = Math.ceil((window.screen.width - popupW)/2);
		var option='width=' + popupW + ',height=' + popupH + ',scrollbars=yes, top=' + top + ',left=' + left + ', resizable=yes';
		
	    window.open(url, 'popup', option);
	}
</script>
</head>
<body>
    <th:block layout:fragment="content">
        <div class="mypage-container">
            <div class="header">
                <h1>예약 내역</h1>
            </div>
            <div class="booking-history">
                <div class="booking-card" th:each="booking : ${bookingList}">
                    <div class="booking-header">
                        <span class="booking-date" th:text="'결제일자 : ' + ${booking['payDate']}"></span>
                        <span class="booking-number" th:text="'예약번호 : ' + ${booking['bo_number']}"></span>
						<a href="#" class="details-link" th:attr="onclick='openPopup(' + ${booking['bo_number']} + ')'">상세보기</a>
                    </div>
                    <div class="booking-content">
                        <img src="https://via.placeholder.com/100" alt="호텔 이미지" class="acc-image">
                        <div class="hotel-info">
                            <div class="acc-name" th:text="${booking['acc_name']}"></div>
                            <div class="ro_name" th:text="${booking['ro_name']}"></div>
                            <div class="booking-dates" th:text="${booking['bo_checkIn']} + ' ~ ' + ${booking['bo_checkOut']} + ' | 1박'"></div>
                            <div class="check-in-out" th:text="'체크인 ' + ${booking['ro_checkIn']} + ' | 체크아웃 ' + ${booking['ro_checkOut']}"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </th:block>
</body>
</html>
